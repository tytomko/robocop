이 코드는 Unscented Kalman Filter (UKF)의 예측(predict)와 보정(correction) 단계를 구현한 예제입니다. UKF는 일반 Kalman Filter(KF)가 선형 시스템에만 적용되는 데 반해, EKF처럼 비선형 시스템을 단순 선형화하지 않고도 상태의 분포(평균과 공분산)를 추정할 수 있도록 해줍니다.  

구체적으로 사용된 알고리즘과 수식은 다음과 같습니다.

---

### 1. Unscented Transform (시그마 포인트 생성 및 전파)

- **Cholesky 분해**  
  현재 상태의 공분산 행렬(_curr_state.cov_mat)에 대해 Cholesky 분해를 통해 하삼각 행렬 \( L \)를 구합니다.  
- **시그마 포인트 생성**  
  상태 차원이 \( n = 5 \)일 때, 2\(n\)+1 = 11개의 시그마 포인트를 생성합니다.  
  - 중앙 시그마 포인트는 현재 상태 벡터 \( \mathbf{x} \)입니다.
  - 나머지 시그마 포인트는  
    \[
    \mathbf{x} \pm \sqrt{n + \lambda} \cdot L_{i}
    \]
    와 같이 계산됩니다.  
  - 여기서 \( \lambda = 3 - n \) (즉, \( \lambda = -2 \)이고, \( n + \lambda = 3 \))를 사용하므로, \( \sqrt{3} \)를 곱하여 시그마 포인트를 생성합니다.

- **가중치 설정**  
  - 중앙 시그마 포인트의 가중치는  
    \[
    W^{(0)} = \frac{\lambda}{n+\lambda} = -\frac{2}{3}
    \]
  - 나머지 시그마 포인트의 가중치는  
    \[
    W^{(i)} = \frac{1}{2(n+\lambda)} = \frac{1}{6},\quad i=1,\dots,10
    \]
  
이 방식은 UKF의 핵심인 unscented transform을 구현하며, 비선형 함수를 통과한 후에도 평균과 공분산을 2차까지 (만약 입력이 가우시안이면 3차까지) 정확하게 보존하도록 설계되어 있습니다.

---

### 2. 예측 단계 (predict 함수)

- **시그마 포인트 전파**  
  각 시그마 포인트에 대해 비선형 운동 모델인 `applyMotionModel`을 적용하여 미래 상태를 계산합니다.
  
- **예측된 상태 평균 계산**  
  전파된 11개의 시그마 포인트에 대해 가중치(-2/3와 1/6)를 곱하여 예측 상태 평균을 구합니다.  
  즉,  
  \[
  \hat{\mathbf{x}} = W^{(0)} \chi_0 + \sum_{i=1}^{10} W^{(i)} \chi_i
  \]
  
- **예측 공분산 계산**  
  각 시그마 포인트와 예측 평균의 차이를 사용해 가중 외적을 계산한 후, 프로세스 노이즈(_process_noise_mat)를 추가하여 예측 공분산을 구합니다.
  
---

### 3. 보정 단계 (correct 함수)

- **측정 공간에서 시그마 포인트 투영**  
  상태 벡터의 측정에 해당하는 부분(여기서는 x, y 위치)을 추출하여, 예측 측정 시그마 포인트 행렬을 구성합니다.
  
- **예측 측정 평균 및 공분산 계산**  
  각 시그마 포인트의 측정값과 예측 측정 평균(예측된 상태의 x, y 성분) 간의 편차를 사용하여, 측정 공분산과 상태-측정 간의 교차 공분산을 계산합니다. 이때, 측정 노이즈(_meas_noise_mat)도 추가됩니다.
  
- **칼만 이득 계산 및 업데이트**  
  교차 공분산과 측정 공분산의 역행렬을 곱하여 칼만 이득 \( K \)를 구한 후, 실제 측정값과 예측 측정 평균의 차이를 곱해 예측된 상태에 보정값을 더합니다.  
  상태 공분산도 칼만 이득을 통해 업데이트됩니다.

---

### 결론

이 코드에서는 UKF의 unscented transform 방식을 사용하여 비선형 운동 모델 및 측정 모델을 처리합니다.  
- 예측 단계에서는 시그마 포인트를 생성하고, 이들을 운동 모델을 통해 전파한 후, 가중 평균과 편차로 예측 상태와 공분산을 산출합니다.  
- 보정 단계에서는 측정 공간에서 시그마 포인트들을 투영하여, 예측 측정 평균, 측정 공분산, 그리고 상태와 측정 사이의 교차 공분산을 구한 후, 칼만 이득을 사용하여 실제 측정값을 반영해 상태를 업데이트합니다.

이 알고리즘은 Julier와 Uhlmann 등이 제안한 Unscented Kalman Filter의 수식을 기반으로 하며, 비선형 상황(예: 코너링 등)에서 KF나 EKF보다 더 정확한 상태 추정을 가능하게 합니다.
